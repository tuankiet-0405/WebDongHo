<%- include('../partials/header', { currentPage: 'products' }) %>

    <!-- Page Header -->
    <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4 animate-fade-in-up">
        <div>
            <h1 class="text-2xl font-semibold tracking-tight text-primary-900">Thêm sản phẩm mới</h1>
            <p class="text-sm text-slate-500 mt-1">Điền thông tin sản phẩm bên dưới</p>
        </div>
        <a href="/admin/products" class="btn-secondary flex items-center gap-2">
            <iconify-icon icon="lucide:arrow-left" width="18"></iconify-icon>
            Quay lại
        </a>
    </div>

    <form action="/admin/products" method="POST" enctype="multipart/form-data" class="space-y-6 animate-fade-in-up"
        style="animation-delay: 100ms;">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Main Info -->
            <div class="lg:col-span-2 space-y-6">
                <div class="bg-white rounded-xl p-6 border border-slate-200 shadow-sm">
                    <h2 class="text-base font-semibold text-slate-900 mb-4">Thông tin cơ bản</h2>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1">Tên sản phẩm *</label>
                            <input type="text" name="name" required class="input-field"
                                placeholder="VD: Rolex Submariner Date">
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-1">SKU</label>
                                <input type="text" name="sku" class="input-field" placeholder="VD: ROL-SUB-001">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-1">Thương hiệu</label>
                                <select name="brand" class="input-field">
                                    <option value="">Chọn thương hiệu</option>
                                    <% brands.forEach(b=> { %>
                                        <option value="<%= b %>">
                                            <%= b %>
                                        </option>
                                        <% }); %>
                                </select>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1">Mô tả ngắn</label>
                            <input type="text" name="shortDescription" class="input-field"
                                placeholder="Mô tả ngắn gọn về sản phẩm">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1">Mô tả chi tiết</label>
                            <textarea name="description" rows="4" class="input-field"
                                placeholder="Mô tả đầy đủ về sản phẩm..."></textarea>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl p-6 border border-slate-200 shadow-sm">
                    <h2 class="text-base font-semibold text-slate-900 mb-4">Thông số kỹ thuật</h2>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1">Bộ máy</label>
                            <select name="specifications[movement]" class="input-field">
                                <% movements.forEach(m=> { %>
                                    <option value="<%= m %>">
                                        <%= m %>
                                    </option>
                                    <% }); %>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1">Kích thước mặt</label>
                            <input type="text" name="specifications[caseSize]" class="input-field"
                                placeholder="VD: 41mm">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1">Chất liệu vỏ</label>
                            <input type="text" name="specifications[caseMaterial]" class="input-field"
                                placeholder="VD: Stainless Steel">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1">Chất liệu dây</label>
                            <input type="text" name="specifications[bandMaterial]" class="input-field"
                                placeholder="VD: Leather">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1">Kháng nước</label>
                            <input type="text" name="specifications[waterResistance]" class="input-field"
                                placeholder="VD: 100m">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1">Loại kính</label>
                            <input type="text" name="specifications[crystalType]" class="input-field"
                                placeholder="VD: Sapphire">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1">Giới tính</label>
                            <select name="specifications[gender]" class="input-field">
                                <% genders.forEach(g=> { %>
                                    <option value="<%= g %>">
                                        <%= g %>
                                    </option>
                                    <% }); %>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1">Phong cách</label>
                            <select name="specifications[style]" class="input-field">
                                <% styles.forEach(s=> { %>
                                    <option value="<%= s %>">
                                        <%= s %>
                                    </option>
                                    <% }); %>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl p-6 border border-slate-200 shadow-sm">
                    <h2 class="text-base font-semibold text-slate-900 mb-4">Tính năng</h2>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Tính năng nổi bật (mỗi dòng 1 tính
                            năng)</label>
                        <textarea name="features" rows="4" class="input-field"
                            placeholder="Chống nước 100m&#10;Dạ quang&#10;Lịch ngày"></textarea>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="space-y-6">
                <div class="bg-white rounded-xl p-6 border border-slate-200 shadow-sm">
                    <h2 class="text-base font-semibold text-slate-900 mb-4">Giá & Kho</h2>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1">Giá bán *</label>
                            <input type="number" name="price" required class="input-field" placeholder="0">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1">Giá khuyến mãi</label>
                            <input type="number" name="salePrice" class="input-field" placeholder="0">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1">Số lượng tồn kho *</label>
                            <input type="number" name="stock" required class="input-field" value="0">
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl p-6 border border-slate-200 shadow-sm">
                    <h2 class="text-base font-semibold text-slate-900 mb-4">Phân loại</h2>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1">Danh mục *</label>
                            <select name="category" required class="input-field">
                                <option value="">Chọn danh mục</option>
                                <% categories.forEach(cat=> { %>
                                    <option value="<%= cat._id %>">
                                        <%= cat.name %>
                                    </option>
                                    <% }); %>
                            </select>
                        </div>
                        <div class="flex items-center gap-4">
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" name="isActive" value="true" checked
                                    class="rounded border-slate-300 text-primary-600 focus:ring-primary-500">
                                <span class="text-sm text-slate-700">Đang bán</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" name="isFeatured" value="true"
                                    class="rounded border-slate-300 text-primary-600 focus:ring-primary-500">
                                <span class="text-sm text-slate-700">Nổi bật</span>
                            </label>
                        </div>
                        <label class="flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" name="isNewArrival" value="true"
                                class="rounded border-slate-300 text-primary-600 focus:ring-primary-500">
                            <span class="text-sm text-slate-700">Sản phẩm mới</span>
                        </label>
                    </div>
                </div>

                <div class="bg-white rounded-xl p-6 border border-slate-200 shadow-sm">
                    <h2 class="text-base font-semibold text-slate-900 mb-4">Hình ảnh</h2>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-2">Upload ảnh (tối đa 5 ảnh)</label>
                        <input type="file" name="images" multiple accept="image/*"
                            class="block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100 cursor-pointer">
                    </div>
                </div>

                <button type="submit" class="w-full btn-primary py-3 text-base">
                    <iconify-icon icon="lucide:save" width="18" class="mr-2"></iconify-icon>
                    Lưu sản phẩm
                </button>
            </div>
        </div>
    </form>

    <%- include('../partials/footer') %>